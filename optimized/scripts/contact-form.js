document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contactForm"),n=document.getElementById("form-status");e.addEventListener("submit",async function(t){if(t.preventDefault(),0===grecaptcha.getResponse().length)return n.innerHTML="Proszę zaznaczyć, że nie jesteś robotem.",void(n.style.color="red");const o=new FormData(t.target),r=e.querySelector('button[type="submit"]'),a=r.innerHTML;r.innerHTML="Wysyłanie...",r.disabled=!0,n.innerHTML="";try{const t=await fetch(e.action,{method:e.method,body:o,headers:{Accept:"application/json"}});if(t.ok)n.innerHTML="Wiadomość została wysłana! Dziękuję.",n.style.color="green",e.reset(),"undefined"!=typeof grecaptcha&&grecaptcha.reset();else{const e=await t.json();Object.hasOwn(e,"errors")?n.innerHTML=e.errors.map(e=>e.message).join(", "):n.innerHTML="Coś poszło nie tak. Spróbuj ponownie.",n.style.color="red"}}catch(e){console.error("Błąd wysyłania:",e),n.innerHTML="Wystąpił błąd sieci. Spróbuj ponownie później.",n.style.color="red"}finally{r.innerHTML=a,r.disabled=!1}})});